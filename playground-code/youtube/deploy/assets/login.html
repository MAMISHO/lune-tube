<!doctype html>
<html>
  <head>
    <title>Search-Oauth</title>
  </head>
  <body>
  <div style="width:100px; height: 100px">
    <a href="#" name="login-button" id="login-button">
      <img src="button.png" width="200px" height= "100px">
    </a>
  </div>
  	<div id="login-container" class="pre-auth">
  		<label id="code"></label>
  		<button id="validate-button" onclick="validar()">validar</button>
  	</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script> -->



    <script type="text/javascript">
    	$(document).ready(function(){
    		$("#login-button").click(function(){
    			console.log("login");
    			var url = "https://accounts.google.com/o/oauth2/auth";
    			var CLIENT_ID = "588965728760-7v9hac1gcppmkqcnktesvvj6qt079296.apps.googleusercontent.com";
    			var REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";
    			var SCOPE = "https://www.googleapis.com/auth/youtube";
    			var RESPONSE_TYPE = "code";
    			var ACCESS_TYPE = "offline";
    			url = url + "?client_id=" + CLIENT_ID + "&redirect_uri=" + REDIRECT_URI + "&scope=" + SCOPE + "&response_type=" + RESPONSE_TYPE;
    			window.open(url, '_blank');
          // window.location.href = url + "&output=embed";
    		});
    	});

    	function validar(){
    		console.log("se van a evaluar con los soguientes datos");

    		var code  = $("#code").val();
    		var CLIENT_ID = "588965728760-7v9hac1gcppmkqcnktesvvj6qt079296.apps.googleusercontent.com";
    		var CLIENT_SECRET = "ylXYTO5pxK--WuCtFIFroxLs";
    		var REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";
    		var GRANT_TYPE = "authorization_code";

    		console.log(code);
    		console.log(CLIENT_ID);
    		console.log(CLIENT_SECRET);
    		console.log(REDIRECT_URI);
    		console.log(GRANT_TYPE);
    		if (code) {
			  $.post("https://accounts.google.com/o/oauth2/token", {
			    code: code,
			    client_id: CLIENT_ID,
			    client_secret: CLIENT_SECRET,
			    redirect_uri: REDIRECT_URI,
			    grant_type: GRANT_TYPE
			  }).done(function(data) {
			  	console.log("done");
			    // deferred.resolve(data);
			    console.log(data);
			  }).fail(function(response) {
			  	console.log(fail);
			    // deferred.reject(response.responseJSON);
			    console.log(response);
			  });
			} else if (error) {
				console.log("error global");
			  deferred.reject({
			    error: error[1]
			  });
			}
    	}
    </script>
  </body>
</html>